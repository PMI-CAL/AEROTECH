%
DVAR $FEEDRATESCRIBE
DVAR $FEEDRATESCRIBE2
DVAR $FEEDRATEHOLE
DVAR $FEEDRATEMACHINE
DVAR $FEEDRATEFLAT 
DVAR $PULSEWIDTHSCRIBE
DVAR $SCRIBEGAP
DVAR $PULSEWIDTHSCRIBE2
DVAR $SCRIBEGAP2
DVAR $PULSEPERIODHOLE
DVAR $PULSEWIDTHHOLE
DVAR $PULSEPERIODMACHINE
DVAR $PULSEWIDTHMACHINE
DVAR $PULSEPERIODFLAT
DVAR $PULSEWIDTHFLAT
DVAR $PULSEPERIODTAP
DVAR $PULSEWIDTHTAP
DVAR $PULSEWIDTHSCRIBE7
DVAR $SCRIBEGAP7
DVAR $PULSEPERIODT8
DVAR $PULSEWIDTHT8 
DVAR $HOLERADIUS
DVAR $HOLELEADINCUT
DVAR $XOFFSET
DVAR $YOFFSET
DVAR $PARTCOUNT
DVAR $TAPDELAY
DVAR $TAPS
DVAR $XSTEP
DVAR $YSTEP
DVAR $STEPSX
DVAR $STEPSY 
 
#DEFINE COAXON $DO0.X = 1
#DEFINE COAXOFF $DO0.X = 0
#DEFINE SIDEON $DO1.X = 1
#DEFINE SIDEOFF $DO1.X = 0
#DEFINE CURRENT1ON $DO2.X = 1
#DEFINE CURRENT1OFF $DO2.X = 0
#DEFINE CURRENT2ON $DO3.X = 1
#DEFINE CURRENT2OFF $DO3.X = 0
#MAKENCODESLABELS
 
; *POST_TEST.NCF*
PSOCONTROL X OFF
COAXOFF
SIDEOFF
CURRENT1OFF
CURRENT2OFF
G0
G54 X8Y0  ;UNLOAD OFFSET
G90X0Y0
M0
; POST_TEST.NCF
; FORMAT: AEROTECH A3200 [PMI] M1797.89.39.POST
; 6/20/2023 AT 2:44 PM

$XOFFSET = 6.23
$YOFFSET = -7.5
CALL INITIALIZE
M97L1P1

M47
 
N1
$FEEDRATESCRIBE = 100
$FEEDRATESCRIBE2 = 100
$FEEDRATEHOLE = 12.
$FEEDRATEMACHINE = 12.
$FEEDRATEFLAT = 12.
 
$TAPDELAY = .02
$TAPS = 3
 
$PULSEWIDTHSCRIBE = 100
$SCRIBEGAP = .006
 
$PULSEWIDTHSCRIBE2 = 100
$SCRIBEGAP2 = .006
 
$PULSEPERIODHOLE = 4000
$PULSEWIDTHHOLE = 650
 
$PULSEPERIODMACHINE = 6000
$PULSEWIDTHMACHINE = 600
 
$PULSEPERIODFLAT = 6000
$PULSEWIDTHFLAT = 600
 
$PULSEWIDTHSCRIBE7 = 100
$SCRIBEGAP7 = .006
 
$PULSEPERIODT8 = 4000
$PULSEWIDTHT8 = 650
 
$PULSEPERIODTAP  = 7100
$PULSEWIDTHTAP = 350
 
CALL CONFIG1
M97P2L1
PSOCONTROL X OFF
COAXOFF
SIDEOFF
CURRENT1OFF
CURRENT2OFF
IF $GLOB20 > -1 ;CHECKS IF PARTCOUNT HAS BEEN CHANGED, UPDATES IF NEEDED
$PARTCOUNT = $GLOB20
$GLOB20 = -1
ENDIF
$PARTCOUNT=$PARTCOUNT+2
MSGDISPLAY 1 "PARTCOUNT = " $PARTCOUNT
RETURN
 
N2 
; SUB NUMBER: 1
; OPERATION 1: CONTOUR
; SCRIBES
; TOOL	1: .0025 ROUGH ENDMILL
M97L1P201
; OPERATION 2: CONTOUR
; ABS SCRIBE
; TOOL	1: .0025 ROUGH ENDMILL
M97L1P202
; OPERATION 3: CONTOUR
; ABS SCRIBE
; TOOL	2: .0025 ROUGH ENDMILL
M97L1P203
; OPERATION 4: CONTOUR
; ABS HOLES
; TOOL	4: .0025 ROUGH ENDMILL
M97L1P204
; OPERATION 5: CONTOUR
; ABS HOLES
; TOOL	4: .0025 ROUGH ENDMILL
M97L1P205
; OPERATION 6: CONTOUR
; T5 ABS
; TOOL	5: .0025 ROUGH ENDMILL
M97L1P206
; OPERATION 7: CONTOUR
; T6 ABS
; TOOL	6: .0025 ROUGH ENDMILL
M97L1P207
; OPERATION 8: CONTOUR PATTERN
; SR SCRIBE
; TOOL	1: .0025 ROUGH ENDMILL
M97L1P208
; OPERATION 9: CONTOUR PATTERN
; SR SCRIBE
; TOOL	2: .0025 ROUGH ENDMILL
M97L1P209
; OPERATION 10: CONTOUR PATTERN
; SR HOLES
; TOOL	4: .0025 ROUGH ENDMILL
M97L1P210
; OPERATION 11: CONTOUR PATTERN
; SR HOLES
; TOOL	4: .0025 ROUGH ENDMILL
M97L1P211
; OPERATION 12: CONTOUR PATTERN
; T5 SR
; TOOL	5: .0025 ROUGH ENDMILL
M97L1P212
; OPERATION 13: CONTOUR PATTERN
; T6 SR
; TOOL	6: .0025 ROUGH ENDMILL
M97L1P213
; OPERATION 14: CONTOUR PATTERN
; NSR SCRIBE
; TOOL	1: .0025 ROUGH ENDMILL
M97L1P214
; OPERATION 15: CONTOUR PATTERN
; NSR SCRIBE
; TOOL	2: .0025 ROUGH ENDMILL
M97L1P215
; OPERATION 16: CONTOUR PATTERN
; NSR HOLES
; TOOL	4: .0025 ROUGH ENDMILL
M97L1P216
; OPERATION 17: CONTOUR PATTERN
; NSR HOLES
; TOOL	4: .0025 ROUGH ENDMILL
M97L1P217
; OPERATION 18: CONTOUR PATTERN
; T5 NSR
; TOOL	5: .0025 ROUGH ENDMILL
M97L1P218
; OPERATION 19: CONTOUR PATTERN
; T6 NSR
; TOOL	6: .0025 ROUGH ENDMILL
M97L1P219
RETURN

N201
G90X0.Y.25
PSOCONTROL	X RESET
PSOPULSE X	TIME ($PULSEWIDTHSCRIBE + 1) $PULSEWIDTHSCRIBE CYCLES 1
PSOOUTPUT X PULSE
PSOTRACK X	INPUT 2,1
PSODISTANCE X FIXED $SCRIBEGAP
SIDEON
F$FEEDRATESCRIBE
PSOCONTROL X ARM
G1X4.5
PSOCONTROL X OFF
G0Y1.25
PSOCONTROL X ARM
G1X0.
PSOCONTROL X OFF
G0Y2.25
PSOCONTROL X ARM
G1X4.5
PSOCONTROL X OFF
G0Y3.25
PSOCONTROL X ARM
G1X0.
PSOCONTROL X OFF
G0Y4.25
PSOCONTROL X ARM
G1X4.5
PSOCONTROL X OFF
G0X4.25Y4.5
PSOCONTROL X ARM
G1Y0.
PSOCONTROL X OFF
G0X3.25
PSOCONTROL X ARM
G1Y4.5
PSOCONTROL X OFF
G0X2.25
PSOCONTROL X ARM
G1Y0.
PSOCONTROL X OFF
G0X1.25
PSOCONTROL X ARM
G1Y4.5
PSOCONTROL X OFF
G0X.25
PSOCONTROL X ARM
G1Y0.
PSOCONTROL X OFF
PSOCONTROL	X RESET
SIDEOFF
G0
RETURN

N202
G90G0X.6Y.3
PSOCONTROL	X RESET
PSOPULSE X	TIME ($PULSEWIDTHSCRIBE + 1) $PULSEWIDTHSCRIBE CYCLES 1
PSOOUTPUT X PULSE
PSOTRACK X	INPUT 2,1
PSODISTANCE X FIXED $SCRIBEGAP
SIDEON
F$FEEDRATESCRIBE
PSOCONTROL X ARM
G1Y.5
PSOCONTROL X OFF
G0X.5Y.4
PSOCONTROL X ARM
G1X.7
PSOCONTROL X OFF
G0X2.6Y.3
PSOCONTROL X ARM
G1Y.5
PSOCONTROL X OFF
G0X2.5Y.4
PSOCONTROL X ARM
G1X2.7
PSOCONTROL X OFF
G0X2.6Y2.3
PSOCONTROL X ARM
G1Y2.5
PSOCONTROL X OFF
G0X2.5Y2.4
PSOCONTROL X ARM
G1X2.7
PSOCONTROL X OFF
G0X.6Y2.3
PSOCONTROL X ARM
G1Y2.5
PSOCONTROL X OFF
G0X.5Y2.4
PSOCONTROL X ARM
G1X.7
PSOCONTROL X OFF
PSOCONTROL	X RESET
SIDEOFF
G0
RETURN

N203
G90G0X.4Y.5
PSOCONTROL	X RESET
PSOPULSE X	TIME ($PULSEWIDTHSCRIBE2 +	1) $PULSEWIDTHSCRIBE2 CYCLES 1
PSOOUTPUT X PULSE
PSOTRACK X	INPUT 2,1
PSODISTANCE X FIXED $SCRIBEGAP2
COAXON
F$FEEDRATESCRIBE2
PSOCONTROL X ARM
G1Y.7
PSOCONTROL X OFF
G0X.3Y.6
PSOCONTROL X ARM
G1X.5
PSOCONTROL X OFF
G0X2.4Y.5
PSOCONTROL X ARM
G1Y.7
PSOCONTROL X OFF
G0X2.3Y.6
PSOCONTROL X ARM
G1X2.5
PSOCONTROL X OFF
G0X2.4Y2.5
PSOCONTROL X ARM
G1Y2.7
PSOCONTROL X OFF
G0X2.3Y2.6
PSOCONTROL X ARM
G1X2.5
PSOCONTROL X OFF
G0X.4Y2.5
PSOCONTROL X ARM
G1Y2.7
PSOCONTROL X OFF
G0X.3Y2.6
PSOCONTROL X ARM
G1X.5
PSOCONTROL X OFF
PSOCONTROL	X RESET
COAXOFF
G0
RETURN

N204
$HOLERADIUS = 0.0125
$HOLELEADINCUT = .004
PSOCONTROL	X RESET
PSOPULSE X	TIME $PULSEPERIODHOLE $PULSEWIDTHHOLE
CURRENT1ON
COAXON
$XOFFSET=$XOFFSET+($HOLERADIUS-$HOLELEADINCUT)
CALL INITIALIZE
X1.45Y.45
M97L1P32
X1.55Y.45
M97L1P32
X3.45Y.45
M97L1P32
X3.55Y.45
M97L1P32
X3.45Y2.45
M97L1P32
X3.55Y2.45
M97L1P32
X1.45Y2.45
M97L1P32
X1.55Y2.45
M97L1P32
$XOFFSET=$XOFFSET-($HOLERADIUS-$HOLELEADINCUT)
CALL INITIALIZE
CURRENT1OFF
PSOCONTROL	X RESET
COAXOFF
G0
RETURN

N205
$HOLERADIUS =0.02
$HOLELEADINCUT =0.004
PSOCONTROL	X RESET
PSOPULSE X	TIME $PULSEPERIODHOLE $PULSEWIDTHHOLE
CURRENT1ON
COAXON
$XOFFSET=$XOFFSET+($HOLERADIUS-$HOLELEADINCUT)
CALL INITIALIZE
X1.55Y.55
M97L1P32
X1.45Y.55
M97L1P32
X3.55Y.55
M97L1P32
X3.45Y.55
M97L1P32
X3.55Y2.55
M97L1P32
X3.45Y2.55
M97L1P32
X1.55Y2.55
M97L1P32
X1.45Y2.55
M97L1P32
$XOFFSET=$XOFFSET-($HOLERADIUS-$HOLELEADINCUT)
CALL INITIALIZE
CURRENT1OFF
PSOCONTROL	X RESET
COAXOFF
G0
RETURN

N206
G90G0X1.5Y1.4
PSOCONTROL	X RESET
PSOPULSE X	TIME $PULSEPERIODMACHINE $PULSEWIDTHMACHINE
COAXON
F$FEEDRATEMACHINE
PSOCONTROL X FIRE CONTINUOUS
G1Y1.6
PSOCONTROL X OFF
G0X1.4Y1.5
PSOCONTROL X FIRE CONTINUOUS
G1X1.6
PSOCONTROL X OFF
G0X3.5Y1.4
PSOCONTROL X FIRE CONTINUOUS
G1Y1.6
PSOCONTROL X OFF
G0X3.4Y1.5
PSOCONTROL X FIRE CONTINUOUS
G1X3.6
PSOCONTROL X OFF
G0X3.5Y3.4
PSOCONTROL X FIRE CONTINUOUS
G1Y3.6
PSOCONTROL X OFF
G0X3.4Y3.5
PSOCONTROL X FIRE CONTINUOUS
G1X3.6
PSOCONTROL X OFF
G0X1.5Y3.4
PSOCONTROL X FIRE CONTINUOUS
G1Y3.6
PSOCONTROL X OFF
G0X1.4Y3.5
PSOCONTROL X FIRE CONTINUOUS
G1X1.6
PSOCONTROL X OFF
CURRENT1OFF
PSOCONTROL	X RESET
COAXOFF
G0
RETURN

N207
G90G0X.5Y1.4
PSOCONTROL	X RESET
PSOPULSE X	TIME $PULSEPERIODFLAT $PULSEWIDTHFLAT
CURRENT1ON
CURRENT2ON
COAXON
F$FEEDRATEFLAT
PSOCONTROL X FIRE CONTINUOUS
G1Y1.6
PSOCONTROL X OFF
G0X.4Y1.5
PSOCONTROL X FIRE CONTINUOUS
G1X.6
PSOCONTROL X OFF
G0X2.5Y1.4
PSOCONTROL X FIRE CONTINUOUS
G1Y1.6
PSOCONTROL X OFF
G0X2.4Y1.5
PSOCONTROL X FIRE CONTINUOUS
G1X2.6
PSOCONTROL X OFF
G0X2.5Y3.4
PSOCONTROL X FIRE CONTINUOUS
G1Y3.6
PSOCONTROL X OFF
G0X2.4Y3.5
PSOCONTROL X FIRE CONTINUOUS
G1X2.6
PSOCONTROL X OFF
G0X.5Y3.4
PSOCONTROL X FIRE CONTINUOUS
G1Y3.6
PSOCONTROL X OFF
G0X.4Y3.5
PSOCONTROL X FIRE CONTINUOUS
G1X.6
PSOCONTROL X OFF
CURRENT1OFF
CURRENT2OFF
PSOCONTROL	X RESET
COAXOFF
G0
RETURN

N208
G90G0X.85Y.55
PSOCONTROL	X RESET
PSOPULSE X	TIME ($PULSEWIDTHSCRIBE + 1) $PULSEWIDTHSCRIBE CYCLES 1
PSOOUTPUT X PULSE
PSOTRACK X	INPUT 2,1
PSODISTANCE X FIXED $SCRIBEGAP
SIDEON
M97P3L1
G90X.85Y2.55
M97P3L1
G90X2.85Y2.55
M97P3L1
G90X2.85Y.55
M97P3L1
PSOCONTROL	X RESET
SIDEOFF
G0
RETURN

N209
G90X.65Y.75
PSOCONTROL	X RESET
PSOPULSE X	TIME ($PULSEWIDTHSCRIBE2 +	1) $PULSEWIDTHSCRIBE2 CYCLES 1
PSOOUTPUT X PULSE
PSOTRACK X	INPUT 2,1
PSODISTANCE X FIXED $SCRIBEGAP2
COAXON
M97P4L1
G90X.65Y2.75
M97P4L1
G90X2.65Y2.75
M97P4L1
G90X2.65Y.75
M97P4L1
PSOCONTROL	X RESET
COAXOFF
G0
RETURN

N210
$HOLERADIUS = 0.0125
$HOLELEADINCUT = .004
PSOCONTROL	X RESET
PSOPULSE X	TIME $PULSEPERIODHOLE $PULSEWIDTHHOLE
CURRENT1ON
COAXON
$XOFFSET=$XOFFSET+($HOLERADIUS-$HOLELEADINCUT)
CALL INITIALIZE
G0
X1.8Y.7
M97P5L4
$XOFFSET=$XOFFSET-($HOLERADIUS-$HOLELEADINCUT)
CALL INITIALIZE
CURRENT1OFF
PSOCONTROL	X RESET
COAXOFF
G0
RETURN

N211
$HOLERADIUS = 0.02
$HOLELEADINCUT = .004
PSOCONTROL	X RESET
PSOPULSE X	TIME $PULSEPERIODHOLE $PULSEWIDTHHOLE
CURRENT1ON
COAXON
$XOFFSET=$XOFFSET+($HOLERADIUS-$HOLELEADINCUT)
CALL INITIALIZE
G0
X1.7Y.8
M97P6L4
$XOFFSET=$XOFFSET-($HOLERADIUS-$HOLELEADINCUT)
CALL INITIALIZE
CURRENT1OFF
PSOCONTROL	X RESET
COAXOFF
G0
RETURN

N212
PSOCONTROL	X RESET
PSOPULSE X	TIME $PULSEPERIODMACHINE $PULSEWIDTHMACHINE
CURRENT1ON
COAXON
G0
G90X1.75Y1.65
M97P7L4
CURRENT1OFF
PSOCONTROL	X RESET
COAXOFF
G0
RETURN

N213
PSOCONTROL	X RESET
PSOPULSE X	TIME $PULSEPERIODFLAT $PULSEWIDTHFLAT
CURRENT1ON
CURRENT2ON
COAXON
G0
G90X.75Y1.65
M97P8L4
CURRENT1OFF
CURRENT2OFF
PSOCONTROL	X RESET
COAXOFF
G0
RETURN

N214
G90X1.1Y.8
PSOCONTROL	X RESET
PSOPULSE X	TIME ($PULSEWIDTHSCRIBE + 1) $PULSEWIDTHSCRIBE CYCLES 1
PSOOUTPUT X PULSE
PSOTRACK X	INPUT 2,1
PSODISTANCE X FIXED $SCRIBEGAP
SIDEON
M97P9L1
G90X3.1Y2.8
M97P9L1
G90X1.1Y2.8
M97P9L1
G90X3.1Y.8
M97P9L1
PSOCONTROL	X RESET
SIDEOFF
G0
RETURN

N215
G90X.9Y1.
PSOCONTROL	X RESET
PSOPULSE X	TIME ($PULSEWIDTHSCRIBE2 +	1) $PULSEWIDTHSCRIBE2 CYCLES 1
PSOOUTPUT X PULSE
PSOTRACK X	INPUT 2,1
PSODISTANCE X FIXED $SCRIBEGAP2
COAXON
M97P10L1
G90X2.9Y3.
M97P10L1
G90X.9Y3.
M97P10L1
G90X2.9Y1.
M97P10L1
PSOCONTROL	X RESET
COAXOFF
G0
RETURN

N216
$HOLERADIUS = 0.0125
$HOLELEADINCUT = .004
PSOCONTROL	X RESET
PSOPULSE X	TIME $PULSEPERIODHOLE $PULSEWIDTHHOLE
CURRENT1ON
COAXON
$XOFFSET=$XOFFSET+($HOLERADIUS-$HOLELEADINCUT)
CALL INITIALIZE
X1.95Y.95
M97P11L1
G90X3.95Y2.95
M97P11L1
G90X1.95Y2.95
M97P11L1
G90X3.95Y.95
M97P11L1
$XOFFSET=$XOFFSET-($HOLERADIUS-$HOLELEADINCUT)
CALL INITIALIZE
CURRENT1OFF
PSOCONTROL	X RESET
COAXOFF
G0
RETURN

N217
$HOLERADIUS =0.020
$HOLELEADINCUT =0.004
$XOFFSET=$XOFFSET+($HOLERADIUS-$HOLELEADINCUT)
CALL INITIALIZE
COAXON
X2.05Y1.05
M97P12L1
G90X4.05Y3.05
M97P12L1
G90X2.05Y3.05
M97P12L1
G90X4.05Y1.05
M97P12L1
$XOFFSET=$XOFFSET-($HOLERADIUS-$HOLELEADINCUT)
CALL INITIALIZE
CURRENT1OFF
PSOCONTROL	X RESET
COAXOFF
G0
RETURN

N218
G90G0X2.Y1.9
PSOCONTROL	X RESET
PSOPULSE X	TIME $PULSEPERIODMACHINE $PULSEWIDTHMACHINE
CURRENT1ON
COAXON
M97P13L1
G90X4.Y3.9
M97P13L1
G90X2.Y3.9
M97P13L1
G90X4.Y1.9
M97P13L1
CURRENT1OFF
PSOCONTROL	X RESET
COAXOFF
G0
RETURN

N219
G90X1.Y1.9
PSOCONTROL	X RESET
PSOPULSE X	TIME $PULSEPERIODFLAT $PULSEWIDTHFLAT
CURRENT1ON
CURRENT2ON
COAXON
M97P14L1
G90X3.Y3.9
M97P14L1
G90X1.Y3.9
M97P14L1
G90X3.Y1.9
M97P14L1
CURRENT1OFF
CURRENT2OFF
PSOCONTROL	X RESET
COAXOFF
G0
RETURN

N3 
; SUB NUMBER: 2
G91
PSOCONTROL X ARM
F$FEEDRATESCRIBE
G1Y.2
PSOCONTROL X OFF
G0X-.1Y-.1
PSOCONTROL X ARM
G1X.2
PSOCONTROL X OFF
G0G90
RETURN
 
N4 
; SUB NUMBER: 3
G91
PSOCONTROL X ARM
F$FEEDRATESCRIBE2
G1Y.2
PSOCONTROL X OFF
G0X-.1Y-.1
PSOCONTROL X ARM
G1X.2
PSOCONTROL X OFF
G0G90
RETURN
 
N5 
; SUB NUMBER: 4
X1.7Y.7
M97L1P32
X1.8Y.7
M97L1P32
CALL SRX
RETURN
 
N6 
; SUB NUMBER: 5
X1.8Y.8
M97L1P32
X1.7Y.8
M97L1P32
CALL SRX
RETURN
 
N7 
; SUB NUMBER: 6
G90X1.75Y1.65
G91
PSOCONTROL X FIRE CONTINUOUS
F$FEEDRATEMACHINE
G1Y.2
PSOCONTROL X OFF
G0X-.1Y-.1
PSOCONTROL X FIRE CONTINUOUS
G1X.2
PSOCONTROL X OFF
CALL SRX
G0G90
RETURN
 
N8 
; SUB NUMBER: 7
G90X.75Y1.65
G91
PSOCONTROL X FIRE CONTINUOUS
F$FEEDRATEFLAT
G1Y.2
PSOCONTROL X OFF
G0X-.1Y-.1
PSOCONTROL X FIRE CONTINUOUS
G1X.2
PSOCONTROL X OFF
CALL SRX
G0G90
RETURN
 
N9 
; SUB NUMBER: 8
G91
PSOCONTROL X ARM
F$FEEDRATESCRIBE
G1Y.2
PSOCONTROL X OFF
G0X-.1Y-.1
PSOCONTROL X ARM
G1X.2
PSOCONTROL X OFF
G0G90
RETURN
 
N10 
; SUB NUMBER: 9
G91
PSOCONTROL X ARM
F$FEEDRATESCRIBE2
G1Y.2
PSOCONTROL X OFF
G0X-.1Y-.1
PSOCONTROL X ARM
G1X.2
PSOCONTROL X OFF
G0G90
RETURN
 
N11 
; SUB NUMBER: 10
G91
X0Y0
M97L1P32
G91X.1Y0
M97L1P32
G0G90
RETURN
 
N12 
; SUB NUMBER: 11
G91
X0Y0
M97L1P32
G91X-.1Y0
M97L1P32
G0G90
RETURN
 
N13 
; SUB NUMBER: 12
G91
PSOCONTROL X FIRE CONTINUOUS
F$FEEDRATEMACHINE
G1Y.2
PSOCONTROL X OFF
G0X-.1Y-.1
PSOCONTROL X FIRE CONTINUOUS
G1X.2
PSOCONTROL X OFF
G0G90
RETURN
 
N14 
; SUB NUMBER: 13
G91
PSOCONTROL X FIRE CONTINUOUS
F$FEEDRATEFLAT
G1Y.2
PSOCONTROL X OFF
G0X-.1Y-.1
PSOCONTROL X FIRE CONTINUOUS
G1X.2
PSOCONTROL X OFF
G0G90
RETURN
 
N31
PSOCONTROL X FIRE CONTINUOUS
G4F$TAPDELAY
PSOCONTROL X OFF
G4F$TAPDELAY
RETURN
 
N32  ;  BACK CUT 0
PUSHMODES 
FARCALL "BUTTONS.PGM", "HOLE"
G91
F$FEEDRATEHOLE
PSOCONTROL X FIRE CONTINUOUS
X$HOLELEADINCUT
G03I-$HOLERADIUS J0
PSOCONTROL X OFF
G0
IF($GLOB29-90)
X-$HOLELEADINCUT
ENDIF
POPMODES
RETURN
 
DFS INITIALIZE
$XSTEP=2.
$STEPSX=2
$YSTEP=2.
$STEPSY=2
G54 X$XOFFSET Y$YOFFSET
$GLOB1=1
$GLOB2=0
$GLOB3=$XOFFSET
$GLOB4=$YOFFSET
ENDDFS
 
DFS SRX
G0
$GLOB5=$STEPSX - $GLOB1
IF($GLOB5 EQ 0)
CALL SRY
ENDIF
$GLOB1 = $GLOB1 + 1
$GLOB2 = $GLOB2 + 1
$GLOB3 = $GLOB3 + $XSTEP
G59 X$GLOB3 Y$GLOB4
$GLOB6=($STEPSX*$STEPSY) - $GLOB2
IF($GLOB6 EQ 0)
CALL INITIALIZE
ENDIF
ENDDFS
 
DFS SRY
$GLOB1 = 0
$GLOB4 = $GLOB4 + $YSTEP
$GLOB3 = $GLOB3 + $XSTEP
$XSTEP = -$XSTEP
ENDDFS
 
DFS CONFIG1
;SAVE OUT PROGRAM VARIABLES TO GLOBAL VARIABLES
$GLOB17 = $SCRIBEGAP
$GLOB19 = $PULSEWIDTHSCRIBE
$GLOB18 = $FEEDRATESCRIBE

$GLOB40 = $SCRIBEGAP2
$GLOB42 = $PULSEWIDTHSCRIBE2
$GLOB41 = $FEEDRATESCRIBE2

$GLOB11 = $PULSEPERIODHOLE
$GLOB12 = $PULSEWIDTHHOLE
$GLOB43 = $FEEDRATEHOLE

$GLOB44 = $PULSEPERIODMACHINE
$GLOB45 = $PULSEWIDTHMACHINE
$GLOB46 = $FEEDRATEMACHINE

$GLOB13 = $PULSEPERIODFLAT
$GLOB14 = $PULSEWIDTHFLAT
$GLOB47 = $FEEDRATEFLAT

;CHECK IF SYSTEM 7, SETS GAP PER SYSTEM
IF $GLOB10 == 7 
	$SCRIBEGAP = $SCRIBEGAP * 127000
	$SCRIBEGAP2 = $SCRIBEGAP2 * 127000
	$SCRIBEGAP7 = $SCRIBEGAP7 * 127000
ELSE
	$SCRIBEGAP = $SCRIBEGAP * 254000 
	$SCRIBEGAP2 = $SCRIBEGAP2 * 254000
	$SCRIBEGAP7 = $SCRIBEGAP7 * 254000
ENDIF
ENDDFS
 
N44 ; USE M97L1P44 TO CALL THIS SUBROUTINE
 
; VARIABLE CUTBACK
$GLOB22=5		;DEGREES UP
$GLOB23=40          	;DEGREES DOWN
 
$GLOB24=$HOLERADIUS*COS($GLOB22*3.14159/180)	;X UP POSITION
$GLOB25=$HOLERADIUS*SIN($GLOB22*3.14159/180) 	;Y UP POSITION
$GLOB26=$HOLERADIUS*COS($GLOB23*3.14159/180)	;X DOWN POSITION
$GLOB27=$HOLERADIUS*SIN($GLOB23*3.14159/180) 	;Y DOWN POSITION
 
G3 X($GLOB24-$HOLERADIUS) Y$GLOB25 I-$HOLERADIUS J0
G2 X($GLOB26-$GLOB24) Y(-$GLOB25-$GLOB27) I-$GLOB24 J-$GLOB25
G3 X($HOLERADIUS-$GLOB26) Y$GLOB27 I-$GLOB26 J$GLOB27
RETURN
 
